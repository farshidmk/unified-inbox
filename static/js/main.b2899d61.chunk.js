(this["webpackJsonpu-inbox"]=this["webpackJsonpu-inbox"]||[]).push([[0],{184:function(e,t,a){},195:function(e){e.exports=JSON.parse('{"menu":{"title":"Sales","buttonName":"Compose","allConverstation":"All converstation","assignedToMe":"Assigned to me","unassigned":"Unassigned","email":"Email","forms":"Forms","filtred":"Filtred","trash":"Trash","connectAnotherChannel":"Connect another channel"}}')},196:function(e){e.exports=JSON.parse('{"home":{"title":"onvaneKhane"}}')},218:function(e,t,a){e.exports=a(345)},345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),l=a(7),i=a(389),s=a(413),u=a(12),d=a(36),m=a(2),p=a(421),h=a(394),f=a(392),g=a(347),b=a(185),E=a.n(b),v=a(186),O=a.n(v),w=a(348),y=a(395),x=a(397),j=a(187),C=a.n(j),S=a(393),k=a(396),N=a(104),T=a.n(N),I=a(53),B=Object(i.a)((function(e){return{root:{display:"flex"},appBarHeight:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:e.palette.primary.main},e.mixins.toolbar),menuButton:{width:42,height:42},menuButtonHide:{width:42,height:42},hide:{display:"none"},drawer:{display:"flex",flexFlow:"column",height:"100vh",width:"15%",flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:"15%",overflowY:"auto",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),transitionTimingFunction:"cubic-bezier(0.6, -0.28, 0.74, 0.05)",transitionDuration:"500ms"},drawerClose:Object(u.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(5)+1},e.breakpoints.up("sm"),{width:e.spacing(5)+1}),list:{paddingLeft:8,minWidth:5},textInList:{fontSize:8,padding:-10},iconInList:{minWidth:35},link:{marginTop:80},channelsSection:{flex:"1",overflowY:"auto",overflowX:"hidden"}}})),F=function(e){var t,a,n=B(),c=r.a.useState(!1),o=Object(l.a)(c,2),i=o[0],s=o[1];return r.a.createElement(p.a,{variant:"permanent",className:Object(m.a)(n.drawer,(t={},Object(u.a)(t,n.drawerOpen,i),Object(u.a)(t,n.drawerClose,!i),t)),classes:{paper:Object(m.a)((a={},Object(u.a)(a,n.drawerOpen,i),Object(u.a)(a,n.drawerClose,!i),a))}},r.a.createElement("div",{className:n.appBarHeight},r.a.createElement(g.a,{color:"inherit","aria-label":"open drawer",onClick:"error"===e.status?e.refetch:function(){s(!0)},className:Object(m.a)(n.menuButton,Object(u.a)({},n.hide,i))},"error"===e.status?r.a.createElement(T.a,null):r.a.createElement(E.a,null)),r.a.createElement("div",{className:Object(m.a)(Object(u.a)({},n.hide,!i)),style:{margin:"auto"}},r.a.createElement(I.a,{variant:"h5",align:"center"},"Channel")),r.a.createElement(g.a,{className:Object(m.a)(n.menuButtonHide,Object(u.a)({},n.hide,!i)),onClick:function(){s(!1)}},r.a.createElement(O.a,null))),r.a.createElement("div",{className:n.channelsSection},r.a.createElement(f.a,null),"error"===e.status?r.a.createElement("div",null,"Failed to load channels"):"loading"===e.status?r.a.createElement(S.a,null):"success"===e.status&&e.channels?r.a.createElement(h.a,null,e.channels.map((function(t,a){return r.a.createElement(w.a,{button:!0,className:n.list,key:t.id,selected:e.selectedChannelId===t.id,onClick:function(a){return n=t.id,void e.onSelectedChannelChange(n);var n}},r.a.createElement(y.a,{className:n.iconInList},r.a.createElement(k.a,{color:"secondary",max:99,badgeContent:t.count},r.a.createElement(C.a,null))),r.a.createElement(x.a,{primary:t.name,className:n.textInList}))}))):r.a.createElement("div",null,"Error")))},M=a(22),H=a.n(M),L=a(198),D=a(37),R=a(201),A=a(425),z=a(188),W=a.n(z),U=a(106),q=a.n(U),K=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.primary.main,display:"flex",alignItems:"center",width:"100%",boxShadow:"0px 0px 0px 0px"},input:{flex:1}}})),P=function(e){var t=K();return r.a.createElement(R.a,{className:t.root},r.a.createElement(g.a,{className:t.iconButton,"aria-label":"menu",onClick:e.onToggle},r.a.createElement(W.a,null)),r.a.createElement(A.a,{className:t.input,placeholder:"Search...",inputProps:{"aria-label":"search threads"},value:e.value,onChange:e.onChange}),r.a.createElement(g.a,{"aria-label":"search",onClick:e.onSearchQueryClick,disabled:!e.value||e.value.length<1},r.a.createElement(q.a,null)))},J=a(411),G=a(424),Q=a(189),Y=Object(i.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},orange:{color:e.palette.primary.dark,backgroundColor:Object(Q.fade)(e.palette.primary.light,.5)},small:{fontSize:e.spacing(2),width:e.spacing(4),height:e.spacing(4)},medium:{fontSize:e.spacing(5),width:e.spacing(7),height:e.spacing(7)},large:{width:e.spacing(14),height:e.spacing(14),fontSize:e.spacing(8)}}})),X=function(e){var t,a=Y();switch(e.size){case"small":t=a.small;break;case"medium":t=a.medium;break;case"large":default:t=a.large}var n=e.firstName[0].toUpperCase()+""+e.lastName[0].toUpperCase();return r.a.createElement("div",{className:a.root},r.a.createElement(G.a,{className:"".concat(a.orange," ").concat(t)},n))},_=a(398),$=a(199),V=a(400),Z=a(107),ee=a.n(Z);function te(e){var t=r.a.useState(null),a=Object(l.a)(t,2),c=a[0],o=a[1],i=r.a.useState(""),s=Object(l.a)(i,2),u=s[0],d=s[1],m=e.threadStatuses,p=e.threadStatusesStatus;Object(n.useEffect)((function(){"success"===p&&m.length>0&&d(m[0])}),[m,p]);var h=function(e){e.currentTarget.textContent?d(e.currentTarget.textContent):"success"===p&&m.length>0&&d(m[0]),o(null)};return r.a.createElement(r.a.Fragment,null,"success"===p?r.a.createElement("div",null,r.a.createElement(_.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},endIcon:r.a.createElement(ee.a,null)},u),r.a.createElement($.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:h},m&&m.map((function(t){return r.a.createElement(V.a,{key:t,onClick:function(a){h(a),e.onMenuChange("".concat(t))}},t)})))):r.a.createElement(S.a,{color:"secondary"}))}var ae=a(404),ne=a(406),re=a(410),ce=a(417),oe=a(409);function le(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(D.a)(H.a.mark((function e(t){var a,n,r,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("TOKEN"),e.prev=1,(n=new Headers).append("x-auth-token",a),r={method:"GET",headers:n,redirect:"follow"},e.next=7,fetch("https://app.rerumapp.uk/test/unified-inbox/"+t,r);case 7:return c=e.sent,e.next=10,c.json();case 10:return c=(c=e.sent).totalCount?{data:c.results,totalCount:c.totalCount}:c.results,e.abrupt("return",c);case 15:throw e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function se(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(D.a)(H.a.mark((function e(t,a){var n,r,c,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("TOKEN"),e.prev=1,(r=new Headers).append("x-auth-token",n),r.append("Content-Type","application/json"),c={method:"POST",headers:r,redirect:"follow",body:JSON.stringify(a)},e.next=8,fetch("https://app.rerumapp.uk/test/unified-inbox/"+t,c);case 8:return o=e.sent,e.abrupt("return",o);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}var de=a(44),me=Object(i.a)((function(e){return{refreshRoot:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},refreshButton:{minWidth:"150px"}}}));function pe(e){var t=new Date(e);return"Invalid Date"===t?e:t.toLocaleString()}var he=function(e){var t=me();return r.a.createElement("div",{className:t.refreshRoot},r.a.createElement("h3",null,"Something went Wrong!"),r.a.createElement(_.a,{className:t.refreshButton,variant:"contained",color:"secondary",onClick:e.handleRefresh,endIcon:r.a.createElement(T.a,null)},"Refresh"))},fe=a(4),ge=a(401),be=a(402),Ee=a(403),ve=Object(i.a)((function(e){return{card:{width:"93%",marginLeft:"5%",marginTop:"10px",overflowY:"auto",backgroundColor:"#fafafa"},avatar:{backgroundColor:e.palette.primary.main},header:{backgroundColor:e.palette.primary,color:"white"}}}));function Oe(e){var t=ve(),a=document.getElementById("content-".concat(e.message.id)),c=Object(n.useState)(!!(a&&a.scrollHeight>a.clientHeight)),o=Object(l.a)(c,2),i=o[0],s=o[1];Object(n.useEffect)((function(){s(!!(a&&a.scrollHeight>a.clientHeight))}),[a]);var u=Object(n.useState)(!1),m=Object(l.a)(u,2),p=m[0],h=m[1];return r.a.createElement(ge.a,{className:t.card},r.a.createElement(be.a,{avatar:r.a.createElement(G.a,{className:t.avatar},e.message.createdBy?"".concat(e.message.createdBy.firstName.charAt(0)).concat(e.message.createdBy.lastName.charAt(0)):"?"),title:r.a.createElement(I.a,{variant:"h6",color:"primary"},e.message.createdBy?"".concat(e.message.createdBy.firstName," ").concat(e.message.createdBy.lastName):"?"),subheader:r.a.createElement(I.a,{color:"secondary"},pe(e.message.createdDate)),className:t.header}),r.a.createElement(Ee.a,{style:{wordBreak:"break-word"}},r.a.createElement("div",{id:"container-".concat(e.message.id)},r.a.createElement("div",{id:"content-".concat(e.message.id),dangerouslySetInnerHTML:{__html:e.message.body},style:Object(d.a)(Object(d.a)({whiteSpace:"normal"},p||e.isOnlyOne?null:{maxHeight:"370px"}),p||e.isOnlyOne?null:{overflow:"hidden"})}),!e.isOnlyOne&&i&&r.a.createElement("div",{style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"center"}},r.a.createElement(_.a,{onClick:function(){return h((function(e){return!e}))},variant:"outlined"},p?"show less":"show more")))))}var we=Object(i.a)((function(e){return{card:{maxWidth:"70%",marginLeft:"auto",marginRight:"auto",marginTop:"10px",overflowY:"hidden",border:"2px solid #ffeb00",borderRadius:"9px 9px 9px 9px",backgroundColor:"#fef8f0"},content:{display:"flex",alignItems:"center",wordBreak:"break-word"},commentText:{padding:2,textAlign:"center"},avatar:{backgroundColor:e.palette.secondary.main}}}));function ye(e){var t=we(),a=document.getElementById("content-".concat(e.message.id)),c=Object(n.useState)(!!(a&&a.scrollHeight>a.clientHeight)),o=Object(l.a)(c,2),i=o[0],s=o[1];Object(n.useEffect)((function(){s(!!(a&&a.scrollHeight>a.clientHeight))}),[a]);var u=Object(n.useState)(!1),m=Object(l.a)(u,2),p=m[0],h=m[1];return r.a.createElement(ge.a,{className:t.card},r.a.createElement(be.a,{avatar:r.a.createElement(G.a,{className:t.avatar},e.message.createdBy?"".concat(e.message.createdBy.firstName.charAt(0)).concat(e.message.createdBy.lastName.charAt(0)):"?"),title:r.a.createElement(I.a,{variant:"h6",color:"secondary"},e.message.createdBy?"".concat(e.message.createdBy.firstName," ").concat(e.message.createdBy.lastName):"?"),subheader:r.a.createElement(I.a,{color:"primary"},pe(e.message.createdDate))}),r.a.createElement(Ee.a,{className:t.content},r.a.createElement("div",{id:"container-".concat(e.message.id)},r.a.createElement("div",{id:"content-".concat(e.message.id),dangerouslySetInnerHTML:{__html:e.message.body},style:Object(d.a)(Object(d.a)(Object(d.a)({whiteSpace:"normal"},p||e.isOnlyOne?null:{maxHeight:"370px"}),p||e.isOnlyOne?null:{overflow:"hidden"}),{},{wordWrap:"break-word"})}),!e.isOnlyOne&&i&&r.a.createElement("div",{style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"center"}},r.a.createElement(_.a,{onClick:function(){return h((function(e){return!e}))},variant:"outlined"},p?"show less":"show more")))))}var xe=a(200),je=a(418),Ce=a(405),Se=a(190),ke=a.n(Se),Ne=(a(228),a(126)),Te=a.n(Ne),Ie=a(38),Be=a(127);a(324);function Fe(e){var t=e.children,a=e.value,n=e.index,c=Object(xe.a)(e,["children","value","index"]);return r.a.createElement(ce.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),a===n&&r.a.createElement(ce.a,{p:1},t))}function Me(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var He=Object(i.a)((function(e){return{root:{padding:"0px",height:"100%",display:"flex",flexFlow:"column"},rootText:{"& > *":{margin:e.spacing(1)},textInput:{overflowY:"hidden"}},editor:{padding:"0px 5px",maxHeight:"30vh",overflow:"auto",maxWidth:"100%",whiteSpace:"prewrap",overflowWrap:"break-word",wordBreak:"break-word"},tab:{minHeight:"160px",maxWidth:"100%"},replyTab:{backgroundColor:"#fafafa"},commentTab:{backgroundColor:"#fef8f0"},appBarSection:{display:"flex",flexDirection:"row",alignItems:"center"},sendButton:{marginLeft:"auto",minWidth:"100px",marginRight:"10px"}}}));function Le(e){var t=He(),a=Object(n.useState)("CLOSED"===e.threadStatus||"COMPLETED"===e.threadStatus?1:0),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(Ie.EditorState.createEmpty()),u=Object(l.a)(s,2),d=u[0],p=u[1],h=Object(n.useState)(Ie.EditorState.createEmpty()),f=Object(l.a)(h,2),g=f[0],b=f[1];return r.a.createElement("div",{className:t.root},r.a.createElement(ae.a,{position:"static",className:t.appBarSection},r.a.createElement(je.a,{value:o,onChange:function(e,t){i(t)},"aria-label":"simple tabs example"},r.a.createElement(Ce.a,Object.assign({label:"Reply"},Me(0),{disabled:"CLOSED"===e.threadStatus||"COMPLETED"===e.threadStatus})),r.a.createElement(Ce.a,Object.assign({label:"Comment"},Me(1)))),r.a.createElement(_.a,{variant:"contained",endIcon:r.a.createElement(ke.a,null),className:t.sendButton,disabled:0===o&&d&&d.getCurrentContent()&&Object(Ie.convertToRaw)(d.getCurrentContent()).blocks[0].text<1||1===o&&g&&g.getCurrentContent()&&Object(Ie.convertToRaw)(g.getCurrentContent()).blocks[0].text<1,onClick:Object(D.a)(H.a.mark((function t(){var a;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={body:0===o?Te()(Object(Ie.convertToRaw)(d.getCurrentContent())):Te()(Object(Ie.convertToRaw)(g.getCurrentContent())),type:0===o?"EMAIL":"COMMENT",visibility:"PUBLIC"},t.prev=1,e.onIsSendingMessage(!0),t.next=5,se("threads/".concat(e.threadId,"/messages"),a);case 5:e.messagesRefresh(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:p(Ie.EditorState.createEmpty()),b(Ie.EditorState.createEmpty()),e.onIsSendingMessage(!1);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))},"Send")),r.a.createElement(Fe,{id:"reply-input-section",value:o,index:0,className:Object(m.a)(t.tab,t.replyTab)},r.a.createElement(Be.Editor,{editorState:d,onEditorStateChange:function(e){p(e)},editorClassName:t.editor,toolbar:{options:["inline","link","list"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline"]}}})),r.a.createElement(Fe,{id:"comment-input-section",value:o,index:1,className:Object(m.a)(t.tab,t.commentTab)},r.a.createElement(Be.Editor,{editorState:g,onEditorStateChange:function(e){b(e)},editorClassName:t.editor,toolbar:{options:["inline","link","list"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline"]}}})))}var De=a(129),Re=a.n(De),Ae=a(416),ze=a(108),We=a(125),Ue=(a(184),Object(i.a)((function(e){return{root:{height:"100vh",display:"flex",flexFlow:"column"},grow:{flexGrow:1,overflow:"auto"},input:{width:"100%",overflow:"auto"},messagesSection:{flex:"1",overflow:"auto",paddingBottom:"5px"},main:{flex:"1",display:"flex",flexFlow:"column",overflow:"auto"},cardRoot:{backgroundColor:"rgba(255, 255, 255, 0)",boxShadow:"0px 0px 0px 0px",height:"64px"}}})));function qe(e){var t=e.threadRefetch,a=e.selectedThread,c=e.onChangeStatus,o=e.isChangingThreadStatus,i=Ue(),s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(null),h=Object(l.a)(p,2),f=h[0],g=h[1],b=Object(n.useState)(null),E=Object(l.a)(b,2),v=E[0],O=E[1],w=Object(n.useState)(""),y=Object(l.a)(w,2),x=y[0],j=y[1],C=Object(n.useState)([]),k=Object(l.a)(C,2),N=k[0],T=k[1],I=Object(n.useState)(""),B=Object(l.a)(I,2),F=B[0],M=B[1],L=Object(n.useState)(0),R=Object(l.a)(L,2),A=R[0],z=R[1],W=Object(n.useState)(!1),U=Object(l.a)(W,2),q=U[0],K=U[1];function P(){return(P=Object(D.a)(H.a.mark((function e(t){var n,r,c=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:0,e.next=3,le("threads/".concat(null===a||void 0===a?void 0:a.id,"/messages?page=").concat(n,"&pageSize=").concat(5));case 3:return r=e.sent,z(r.totalCount),e.abrupt("return",{data:r.data,page:n});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=Object(de.a)({queryKey:"threads/".concat(null===a||void 0===a?void 0:a.id,"/messages"),queryFn:function(e){return P.apply(this,arguments)},config:{getFetchMore:function(e,t){return!(5*e.page>=A)&&e.page+1},refetchOnWindowFocus:!1,enabled:!!a}}),G=J.data,Q=J.status,Y=J.refetch,X=J.fetchMore,Z=J.canFetchMore,te=J.isFetchingMore,re=Object(de.b)({queryKey:"threads/status",queryFn:le,config:{refetchOnWindowFocus:!1,staleTime:5e4}}),ce=re.data,oe=re.status,ie=Object(n.useState)(),ue=Object(l.a)(ie,2),me=ue[0],pe=ue[1];Object(n.useEffect)((function(){pe(a&&a.assignee&&a.assignee.firstName?"".concat(a.assignee.firstName," ").concat(a.assignee.lastName):"Unassigned")}),[a]);var fe=function(){g(null)},Ee=Object(de.b)({queryKey:"users",queryFn:le,config:{refetchOnWindowFocus:!1}}),ve=Ee.data,we=Ee.status;function xe(){return(xe=Object(D.a)(H.a.mark((function e(n,r){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M("loading"),e.prev=1,e.next=4,se("reassign?assigneeId=".concat(n,"&threadId=").concat(a.id));case 4:M("success"),pe(r),t(),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(1),M("error"),console.log(e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e;if(x.length>2&&ve&&ve.length>0){var t=x.toUpperCase();e=ve.filter((function(e){return e.firstName.toUpperCase().indexOf(t)>-1||(e.lastName.toUpperCase().indexOf(t)>-1||e.email.toUpperCase().indexOf(t)>-1)})),T(e)}else T([])}),[x,ve]),Object(n.useEffect)((function(){m(!1),G&&1===G[0].data.length&&m(!0)}),[G]),r.a.createElement("div",{className:i.root},r.a.createElement(ae.a,{position:"sticky"},r.a.createElement(ne.a,null,G&&G[0].data.length>0?r.a.createElement(r.a.Fragment,null,"loading"===we||"loading"===F?r.a.createElement(S.a,{color:"secondary"}):r.a.createElement(ge.a,{className:i.cardRoot},r.a.createElement(be.a,{style:{cursor:"pointer"},avatar:r.a.createElement(Re.a,null),title:Boolean(f)?null:"Assignee",subheader:Boolean(f)?null:me,onClick:function(e){g(e.currentTarget)}})),r.a.createElement("div",{className:i.grow}),"success"===oe&&ce.length>0?r.a.createElement(_.a,{"aria-controls":"status-menu-button","aria-haspopup":"true",onClick:function(e){return O(e.currentTarget)},endIcon:r.a.createElement(ee.a,null)},a.status):r.a.createElement(S.a,{color:"secondary"}),r.a.createElement($.a,{id:"status-menu",anchorEl:v,keepMounted:!1,open:Boolean(v),onClose:function(){return O(null)}},ce.map((function(e){return e===a.status?null:r.a.createElement(V.a,{key:e,onClick:function(){c(e),O(null)}},"Mark as ".concat(e))}))),r.a.createElement(Ke,{id:"simple-menu",anchorEl:f,keepMounted:!1,open:Boolean(f),onClose:fe,style:{marginLeft:"45px",marginTop:"-10px"}},r.a.createElement("div",{style:{padding:"2px"}},r.a.createElement(Ae.a,{placeholder:"User",value:x,onChange:function(e){return j(e.target.value)},fullWidth:!0})),"loading"===we?r.a.createElement(S.a,null):N&&N.length>0?N.map((function(e){return r.a.createElement("div",{key:e.id,style:{backgroundColor:"white",border:"1px solid #ffc107"}},r.a.createElement(V.a,{onClick:function(t){!function(e,t){xe.apply(this,arguments)}(e.id,"".concat(e.firstName," ").concat(e.lastName)),fe()}},r.a.createElement(ge.a,{style:{boxShadow:"none",width:"100%"}},r.a.createElement(be.a,{avatar:r.a.createElement(Re.a,null),title:"".concat(e.firstName," ").concat(e.lastName),subheader:e.email}))))})):null)):null)),o?r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement(S.a,null)):G&&G.length>0?r.a.createElement("div",{className:i.main},r.a.createElement("div",{className:i.messagesSection},G.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e.data&&e.data.map((function(e){switch(e.type){case"EMAIL":return r.a.createElement(Oe,{key:e.id,message:e,isOnlyOne:d});case"COMMENT":default:return r.a.createElement(ye,{key:e.id,message:e,isOnlyOne:d})}})))})),!te&&5*Z<A?r.a.createElement(ze.a,{onEnter:function(){return X()}}):te?r.a.createElement("div",{style:{margin:"10px 0px",display:"flex",justifyContent:"center"}},r.a.createElement(S.a,null)):r.a.createElement("h4",{style:{textAlign:"center",color:"grey"}},"end of the list")),r.a.createElement("div",{className:i.input},r.a.createElement(Le,{threadStatus:a.status,threadId:a.id,messagesRefresh:Y,onIsSendingMessage:function(e){return K(e)}}))):"loading"===Q||q?r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement(S.a,null)):"error"===Q?r.a.createElement(he,{handleRefresh:Y}):r.a.createElement("h2",{style:{textAlign:"center"}},"Select a thread to see messages"))}var Ke=Object(fe.a)({paper:{backgroundColor:"#ffffff00"}})((function(e){return r.a.createElement($.a,Object.assign({elevation:0,getContentAnchorEl:null},e))})),Pe=a(193),Je=a.n(Pe),Ge=a(192),Qe=a.n(Ge),Ye=a(391),Xe=Object(i.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",verticalAlign:"middle",width:"100%"},avatar:{height:"85px",width:"85px",backgroundColor:e.palette.primary.main,fontSize:"40px"}}})),_e=function(e){var t=Xe(),a=e.selectedContact,n=a.contactFirstName,c=a.contactLastName,o=a.email;return e.selectedContact?r.a.createElement("div",{className:t.root},n&&c?r.a.createElement(G.a,{className:t.avatar},"".concat(n[0]).concat(c[0])):null,r.a.createElement(I.a,{variant:"h6"},"".concat(n," ").concat(c)),r.a.createElement(I.a,{variant:"subtitle1"},o)):null},$e=a(423),Ve=a(407),Ze=a(408),et=a(191),tt=a.n(et),at=Object(i.a)((function(e){return{root:{width:"100%",flex:"1",overflow:"auto"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},scroll:{display:"flex",flexDirection:"column",maxWidth:"90%"}}}));function nt(e){var t,a=at(),n=r.a.useState("panel1"),c=Object(l.a)(n,2),o=c[0],i=c[1],s=e.selectedContact;return r.a.createElement("div",{className:a.root},r.a.createElement($e.a,{expanded:"panel1"===o,onChange:(t="panel1",function(e,a){i(!!a&&t)})},r.a.createElement(Ve.a,{expandIcon:r.a.createElement(tt.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header",style:{backgroundColor:"#d4d4d4"}},r.a.createElement(I.a,{className:a.heading},"About this contact")),r.a.createElement(Ze.a,null,r.a.createElement("div",null,r.a.createElement(I.a,{variant:"subtitle1"},"First Name:"),r.a.createElement(I.a,{variant:"subtitle2"},s&&s.contactFirstName?s.contactFirstName:"Unknown"),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"subtitle1"},"Last Name:"),r.a.createElement(I.a,{variant:"subtitle2"},s&&s.contactLastName?s.contactLastName:"Unknown"),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"subtitle1"},"Email:"),r.a.createElement(I.a,{variant:"subtitle2"},s&&s.email?s.email:"No Email Address"),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"subtitle1"},"Phone number:"),r.a.createElement(I.a,{variant:"subtitle2"},s&&s.telephone?s.telephone:"No Phone Number"),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"subtitle1"},"Company name:"),r.a.createElement(I.a,{variant:"subtitle2"},s&&s.companyName?s.companyName:"No Company Name")))))}var rt=a(422),ct=a(419);function ot(e){return r.a.createElement(ct.a,Object.assign({elevation:6,variant:"filled"},e))}var lt=Object(i.a)((function(e){var t;return{root:{display:"flex"},appbarHieght:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"flex-start",backgroundColor:e.palette.primary.main},e.mixins.toolbar),menuButton:{width:42,height:42},hide:{display:"none"},drawer:{height:"100vh",display:"flex",flexFlow:"column",width:"20%",flexShrink:0,whiteSpace:"nowrap"},drawerOpen:(t={width:"20%"},Object(u.a)(t,e.breakpoints.down("md"),{width:"50vh"}),Object(u.a)(t,"transition",e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})),Object(u.a)(t,"transitionTimingFunction","cubic-bezier(0.6, -0.28, 0.74, 0.05)"),Object(u.a)(t,"transitionDuration","500ms"),t),drawerClose:Object(u.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(4)+1},e.breakpoints.up("sm"),{width:e.spacing(5)+1}),content:{flexGrow:1,padding:e.spacing(0)},customerInfoSection:{paddingTop:"5px",flex:"1",overflow:"auto",display:"flex",flexFlow:"column"}}})),it=function(e){var t,a,c=e.Contacts,o=lt(),i=r.a.useState(!1),s=Object(l.a)(i,2),d=s[0],h=s[1],b=r.a.useState(!1),E=Object(l.a)(b,2),v=E[0],O=E[1],w=c&&c[0];Object(n.useEffect)((function(){h(!!w)}),[w]);return r.a.createElement(p.a,{variant:"permanent",anchor:"right",className:Object(m.a)(o.drawer,(t={},Object(u.a)(t,o.drawerOpen,d),Object(u.a)(t,o.drawerClose,!d),t)),classes:{paper:Object(m.a)((a={},Object(u.a)(a,o.drawerOpen,d),Object(u.a)(a,o.drawerClose,!d),a))}},r.a.createElement("div",{className:o.appbarHieght},r.a.createElement(g.a,{color:"inherit","aria-label":"open drawer",onClick:function(){w?h(!0):O(!0)},className:Object(m.a)(o.menuButton,Object(u.a)({},o.hide,d)),disabled:!w||w.length<1},r.a.createElement(Qe.a,null)),r.a.createElement(g.a,{className:Object(m.a)(o.menuButton,Object(u.a)({},o.hide,!d)),onClick:function(){h(!1)}},r.a.createElement(Je.a,null)),r.a.createElement("div",{className:Object(m.a)(Object(u.a)({},o.hide,!d)),style:{margin:"auto"}},r.a.createElement(I.a,{variant:"h5",align:"center",style:{marginRight:"48px"}},"Contact"))),r.a.createElement(Ye.a,{in:d,timeout:{enter:1e3,exit:500},className:Object(m.a)(Object(u.a)({},o.hide,!d))},r.a.createElement("div",{style:{flex:"1",overflow:"auto",display:"flex",flexFlow:"column"}},r.a.createElement("div",{className:Object(m.a)(o.customerInfoSection,Object(u.a)({},o.hide,!d))},r.a.createElement(_e,{selectedContact:w||"Unknown"}),r.a.createElement(f.a,null),r.a.createElement(nt,{selectedContact:w||"Unknown"})))),r.a.createElement(rt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:v,autoHideDuration:4e3,onClose:function(e,t){"clickaway"!==t&&O(!1)}},r.a.createElement(ot,{severity:"error"},"Contact not selected")))},st=Object(i.a)((function(e){return{root:{width:"100%",height:"100vh",display:"flex"},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",height:"calc(100vh - 66px)"},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0},inline:{display:"inline"},searchInputOpen:{width:"80%",overflow:"hidden",backgroundColor:"#cecece",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},searchInputClose:Object(u.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(5)+1},e.breakpoints.up("sm"),{width:e.spacing(5)+1}),hide:{display:"none"},tools:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",backgroundColor:e.palette.primary.main,boxShadow:"0px 0px 0px 0px"},toolbar:{width:"100%"},space:{flexGrow:10},threads:Object(u.a)({height:"100vh"},e.breakpoints.down("sm"),{height:"35vh",overflow:"auto"}),messageInfo:Object(u.a)({height:"100vh"},e.breakpoints.down("sm"),{height:"55vh",overflow:"auto"}),content:{width:"100%"}}})),ut=function(e){var t,a,c=e.channelID,o=st(),i=Object(n.useState)(""),s=Object(l.a)(i,2),d=s[0],p=s[1],b=Object(n.useState)(!1),E=Object(l.a)(b,2),v=E[0],O=E[1],y=Object(n.useState)(!1),j=Object(l.a)(y,2),C=j[0],k=j[1],N=Object(n.useState)(""),T=Object(l.a)(N,2),B=T[0],F=T[1],M=Object(n.useState)(!1),A=Object(l.a)(M,2),z=A[0],W=A[1],U=Object(n.useState)(0),K=Object(l.a)(U,2),G=K[0],Q=K[1],Y=Object(n.useState)(window.innerHeight),_=Object(l.a)(Y,2),$=_[0],V=_[1];Object(n.useEffect)((function(){window.addEventListener("resize",(function(){return V(window.innerHeight)}))}),[]);var Z=Object(de.b)({queryKey:"threads/status",queryFn:le,config:{refetchOnWindowFocus:!1,staleTime:1/0}}),ee=Z.data,ie=Z.status;function ue(){return(ue=Object(D.a)(H.a.mark((function e(t){var a,n,r=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:0,!z){e.next=7;break}return e.next=4,le("channels/".concat(c,"/threads/search?page=").concat(a,"&pageSize=").concat(10,"&searchQuery=").concat(B));case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,le("channels/".concat(c,"/threads?page=").concat(a,"&pageSize=").concat(10,"&status=").concat(d));case 9:n=e.sent;case 10:return Q(n.totalCount),e.abrupt("return",{data:n.data,page:a});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){"success"===ie&&ee.length>0&&p(ee[0])}),[ee,ie]);var me=Object(de.a)({queryKey:{searchByQuery:z,filter:d},queryFn:d.length>0||z?function(e){return ue.apply(this,arguments)}:null,config:{getFetchMore:function(e,t){return!(10*e.page>=G)&&e.page+1},refetchOnWindowFocus:!1,enabled:!!c}}),fe=me.data,ge=me.status,be=me.refetch,Ee=me.fetchMore,ve=me.canFetchMore,Oe=me.isFetchingMore,we=function(){k(!C),W(!1)},ye=Object(n.useState)(),xe=Object(l.a)(ye,2),je=xe[0],Ce=xe[1];function Se(){return(Se=Object(D.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,se("threads/".concat(je.id,"/status?status=").concat(t));case 4:be(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:O(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){"success"===ge&&fe&&fe[0].data&&fe[0].data.length>0?Ce(fe[0].data[0]):Ce()}),[fe,ge]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:o.content},r.a.createElement("div",{className:o.root},r.a.createElement(We.ResizableBox,{className:"box",height:$,width:300,axis:"x",resizeHandles:["e"]},r.a.createElement("div",null,r.a.createElement(ae.a,{position:"sticky"},r.a.createElement(ne.a,{className:o.toolbar},r.a.createElement(oe.a,{in:!C},r.a.createElement(R.a,{className:Object(m.a)((t={},Object(u.a)(t,o.tools,!C),Object(u.a)(t,o.hide,C),t))},r.a.createElement(te,{onMenuChange:function(e){p(e)},threadStatuses:ee,threadStatusesStatus:ie}),r.a.createElement(g.a,{"aria-label":"delete",onClick:we,size:"small"},r.a.createElement(q.a,null)))),r.a.createElement(oe.a,{in:C},r.a.createElement(R.a,{className:Object(m.a)((a={},Object(u.a)(a,o.tools,C),Object(u.a)(a,o.hide,!C),a))},r.a.createElement(P,{value:B,onToggle:we,show:C,onChange:function(e){F(e.target.value)},onSearchQueryClick:function(){W(!0),be()}}))))),r.a.createElement(R.a,{variant:"outlined"},r.a.createElement(h.a,{className:o.list},"loading"===ge?Object(L.a)(Array(20)).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(w.a,{alignItems:"flex-start",key:t},r.a.createElement(ce.a,{width:"100%"},r.a.createElement(re.a,null),r.a.createElement(re.a,{width:"60%"}))),r.a.createElement(f.a,{variant:"middle",component:"li"}))})):fe&&fe[0].data&&0!==G?"success"===ge&&fe&&fe[0]&&fe[0].data&&fe[0].data.length<1?r.a.createElement("h2",{style:{textAlign:"center",color:"#5b5b5b"}},"No Thread"):"success"===ge&&fe&&fe.length>0?fe.map((function(e,t){return e.data.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(w.a,{button:!0,alignItems:"flex-start",selected:(null===je||void 0===je?void 0:je.id)===e.id,onClick:function(){return Ce(e)}},r.a.createElement(J.a,null,r.a.createElement(X,{size:"small",firstName:e.contacts[0].contactFirstName[0],lastName:e.contacts[0].contactLastName[0]})),r.a.createElement(x.a,{primary:e.subject,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{component:"span",variant:"body2",className:o.inline,color:"textPrimary"},e.tag," - "),r.a.createElement(I.a,{variant:"caption"},pe(e.createdDate)))})),r.a.createElement(f.a,{component:"li"}))}))})):"error"===ge?r.a.createElement(he,{handleRefresh:be}):null:r.a.createElement("h2",{style:{textAlign:"center",color:"#5b5b5b"}},"No Thread"),!Oe&&10*ve<G?r.a.createElement(ze.a,{onEnter:function(){return Ee()}}):Oe?r.a.createElement("div",{style:{margin:"10px 0px",display:"flex",justifyContent:"center"}},r.a.createElement(S.a,null)):null)))),r.a.createElement("div",{style:{flex:"1"}},r.a.createElement(qe,{threadRefetch:be,selectedThread:je,onChangeStatus:function(e){return Se.apply(this,arguments)},isChangingThreadStatus:v})))),r.a.createElement(it,{Contacts:null===je||void 0===je?void 0:je.contacts}))},dt=a(194),mt=a(412),pt=Object(i.a)((function(e){return{smallScreenSection:{backgroundColor:"#f1f1f1",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20%",textAlign:"center"},root:{display:"flex"},menuButton:{width:42,height:42},hide:{display:"none"},drawer:{width:"15%",flexShrink:0,whiteSpace:"nowrap"},content:{flexGrow:1,padding:e.spacing(0),height:"100vh"},backdropRoot:{display:"flex","& > * + *":{marginLeft:e.spacing(1),alignItems:"center",justify:"center",height:"100vh"}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ht=function(){var e=pt(),t=Object(mt.a)("(min-width:700px)"),a=Object(n.useState)(),c=Object(l.a)(a,2),o=c[0],i=c[1],u=Object(de.b)({queryKey:"channels",queryFn:le,config:{refetchOnWindowFocus:!1}}),d=u.data,m=u.status,p=u.refetch;return Object(n.useEffect)((function(){"success"===m&&d.length>0&&i(d[0].id)}),[m,d]),Object(n.useEffect)((function(){(new Headers).append("Content-Type","application/x-www-form-urlencoded");var e=new FormData;e.append("username","ashkala"),e.append("password","block-monitored-policebox"),fetch("https://app.rerumapp.uk/test/authenticate",{method:"POST",body:e,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return localStorage.setItem("TOKEN",JSON.parse(e).token)})).catch((function(e){return console.log("error in token",e)}))}),[]),t?r.a.createElement("div",{className:e.root},r.a.createElement(dt.ReactQueryDevtools,null),r.a.createElement(s.a,null),r.a.createElement(F,{status:m,refetch:p,channels:d,onSelectedChannelChange:function(e){i(e)},selectedChannelId:o}),r.a.createElement(ut,{channelID:o})):r.a.createElement("div",{className:e.smallScreenSection},r.a.createElement("h3",null,"The page cannot be displayed on this screen"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(332),a(333);var ft=a(414),gt=a(197),bt=a(415),Et=a(130),vt=a(195),Ot=a(196);Object(Et.setDefaultTranslations)({en:vt,fr:Ot}),Object(Et.setDefaultLanguage)("en");var wt=Object(gt.a)({palette:{primary:{dark:"#d67200",main:"#f69321",light:"#ffb560"},secondary:{main:ft.a[500]}}});o.a.render(r.a.createElement(bt.a,{theme:wt},r.a.createElement(ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[218,1,2]]]);
//# sourceMappingURL=main.b2899d61.chunk.js.map